<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="fr" xml:lang="fr"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.549">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Apprentissage automatique interprétable</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../08-global_model_agnostic_methods/08.3-feature-interaction.html" rel="next">
<link href="../08-global_model_agnostic_methods/08.1-pdp.html" rel="prev">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "Pas de résultats",
    "search-matching-documents-text": "documents trouvés",
    "search-copy-link-title": "Copier le lien vers la recherche",
    "search-hide-matches-text": "Cacher les correspondances additionnelles",
    "search-more-match-text": "correspondance de plus dans ce document",
    "search-more-matches-text": "correspondances de plus dans ce document",
    "search-clear-button-title": "Effacer",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Annuler",
    "search-submit-button-title": "Envoyer",
    "search-label": "Recherche"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Basculer la barre latérale" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../08-global_model_agnostic_methods/index.html">8 - Méthodes globales indépendantes du modèle</a></li><li class="breadcrumb-item"><a href="../08-global_model_agnostic_methods/08.2-ale.html">8.2 - Graphique des effets locaux accumulés (ALE)</a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Basculer la barre latérale" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">Apprentissage automatique interprétable</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Recherche"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../00-summary/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Résumé</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../01-preface/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1 - Préface de l’auteur</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../02-introduction/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2 - Introduction</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Basculer la section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../02-introduction/02.1-short_stories.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2.1 - Quelques histoires</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../02-introduction/02.2-ml_definitions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2.2 - Qu’est-ce que l’apprentissage automatique ?</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../02-introduction/02.3-terminology.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2.3 - Terminologie</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../03-interpretability/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">3 - Interprétabilité</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Basculer la section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../03-interpretability/03.1-importance_of_interpretability.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">3.1 - Importance de l’Interprétabilité</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../03-interpretability/03.2-taxonomy_of_interpretability_methods.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">3.2 - Taxonomie des Méthodes d’Interprétabilité</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../03-interpretability/03.3-scope_of_interpretability.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">3.3 - Portée de l’Interprétabilité</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../03-interpretability/03.4-evaluation_of_interpretability.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">3.4 - Evaluation de l’interprétabilité</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../03-interpretability/03.5-properties_of_explanations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">3.5 - Propriétés des Explications</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../03-interpretability/03.6-human_friendly_explanations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">3.6 - Explications conviviales pour l’être humain</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../04-datasets/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">4 - Jeux de données</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Basculer la section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../04-datasets/04.1-datasets.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">4.1 - Location de vélo (Régression)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../04-datasets/04.2-datasets.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">4.2 - Commentaires indésirables sur YouTube (Classification de Texte)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../04-datasets/04.3-datasets.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">4.3 - Facteurs de Risque du Cancer du Col de l’Uterus (Classification)</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../05-interpretable_models/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">5 - Modèles interprétables</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Basculer la section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../05-interpretable_models/05.1-linear-regression.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">5.1 - Régéression linéaire</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../05-interpretable_models/05.2-logistic-regression.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">5.2 - Régéression logistique</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../05-interpretable_models/05.3-glm-gam-more.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">5.3 - GLM, GAM et plus</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../05-interpretable_models/05.4-decision-tree.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">5.4 - Arbre de décision</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../05-interpretable_models/05.5-decision-rules.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">5.5 - Règles de décision</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../05-interpretable_models/05.6-rulefit.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">5.6 - Ajustement des règles</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../05-interpretable_models/05.7-other-interpretable-models.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">5.7 - Autres modèles interprétables</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../06-model_agnostic_methods/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">6 - Méthodes indépendantes du modèle</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../07-example/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">7 - Explications basées sur des exemples</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../08-global_model_agnostic_methods/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">8 - Méthodes globales indépendantes du modèle</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true" aria-label="Basculer la section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../08-global_model_agnostic_methods/08.1-pdp.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">8.1 - Diagramme de dépendance partielle (PDP)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../08-global_model_agnostic_methods/08.2-ale.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">8.2 - Graphique des effets locaux accumulés (ALE)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../08-global_model_agnostic_methods/08.3-feature-interaction.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">8.3 - Interactions avec les fonctionnalités</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../08-global_model_agnostic_methods/08.4-functional-decomposition.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">8.4 - Functional Decomposition</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../08-global_model_agnostic_methods/08.5-permutation-feature-importance.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">8.5 - Décomposition fonctionnelle</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../08-global_model_agnostic_methods/08.6-global-surrogate.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">8.6 - Substitut global</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../08-global_model_agnostic_methods/08.7-prototype-criticisms.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">8.7 - Prototypes et critiques</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../09-local_model_agnostic_methods/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">9 - Méthodes locales indépendantes du modèle</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true" aria-label="Basculer la section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../09-local_model_agnostic_methods/09.1-ice.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">9.1 - Attente Conditionnelle Individuelle (<em>Individual Conditional Expectation - ICE</em>)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../09-local_model_agnostic_methods/09.2-lime.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">9.2 - Substitut local (LIME)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../09-local_model_agnostic_methods/09.3-counterfactual.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">9.3 - Explications contrefactuelles</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../09-local_model_agnostic_methods/09.4-anchors.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">9.4 - Règles de portée (ancres)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../09-local_model_agnostic_methods/09.5-shapley.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">9.5 - Valeurs de Shapley</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../09-local_model_agnostic_methods/09.6-shap.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">9.6 - SHAP (SHapley Additive exPlanations)</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../10-neuralnet/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">10 - Interprétation d'un réseau de neurone</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="true" aria-label="Basculer la section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../10-neuralnet/10.1-learned-features.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">10.1 - Caractéristiques apprises</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../10-neuralnet/10.2-pixel-attribution.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">10.2 - Attribution de pixel</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../10-neuralnet/10.3-concepts.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">10.3 - Détecter les concepts</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../10-neuralnet/10.4-adversarial-examples.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">10.4 - Exemples adverses</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../10-neuralnet/10.5-influential-instances.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">10.5 - Instances Influentes</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../11-future/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">11 - Un Regard dans une boule de cristal</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" aria-expanded="true" aria-label="Basculer la section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../11-future/11.1-future-ml.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">11.1 - L’avenir de l’apprentissage automatique</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../11-future/11.2-future-interpretability.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">11.2 - L’avenir de l’interprétabilité</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../12-contribute/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">12 - Contribuer à ce livre</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../13-citation/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">13 - Citer ce livre</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../14-translations/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">14 - Traductions</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../15-acknowledgements/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">15 - Remerciements</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active" data-toc-expanded="4">
    <h2 id="toc-title">Dans cette page</h2>
   
  <ul>
  <li><a href="#graphique-des-effets-locaux-accumulés-ale" id="toc-graphique-des-effets-locaux-accumulés-ale" class="nav-link active" data-scroll-target="#graphique-des-effets-locaux-accumulés-ale">8.2 - Graphique des effets locaux accumulés (ALE)</a>
  <ul>
  <li><a href="#motivation-et-intuition" id="toc-motivation-et-intuition" class="nav-link" data-scroll-target="#motivation-et-intuition">8.2.1 - Motivation et intuition</a></li>
  <li><a href="#théorie" id="toc-théorie" class="nav-link" data-scroll-target="#théorie">8.2.2 - Théorie</a></li>
  <li><a href="#estimation" id="toc-estimation" class="nav-link" data-scroll-target="#estimation">8.2.3 - Estimation</a></li>
  <li><a href="#exemples" id="toc-exemples" class="nav-link" data-scroll-target="#exemples">8.2.4 - Exemples</a></li>
  <li><a href="#avantages" id="toc-avantages" class="nav-link" data-scroll-target="#avantages">8.2.5 - Avantages</a></li>
  <li><a href="#inconvénients" id="toc-inconvénients" class="nav-link" data-scroll-target="#inconvénients">8.2.6 - Inconvénients</a></li>
  <li><a href="#mise-en-œuvre-et-alternatives" id="toc-mise-en-œuvre-et-alternatives" class="nav-link" data-scroll-target="#mise-en-œuvre-et-alternatives">8.2.7 - Mise en œuvre et alternatives</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../08-global_model_agnostic_methods/index.html">8 - Méthodes globales indépendantes du modèle</a></li><li class="breadcrumb-item"><a href="../08-global_model_agnostic_methods/08.2-ale.html">8.2 - Graphique des effets locaux accumulés (ALE)</a></li></ol></nav>
<div class="quarto-title">
</div>



<div class="quarto-title-meta">

    
  
    <div>
    <div class="quarto-title-meta-heading">Modifié</div>
    <div class="quarto-title-meta-contents">
      <p class="date-modified">10 mai 2024</p>
    </div>
  </div>
    
  </div>
  


</header>


<section id="graphique-des-effets-locaux-accumulés-ale" class="level2">
<h2 class="anchored" data-anchor-id="graphique-des-effets-locaux-accumulés-ale">8.2 - Graphique des effets locaux accumulés (ALE)</h2>
<p>Les effets locaux accumulés<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> décrivent comment les caractéristiques influencent en moyenne la prédiction d’un modèle d’apprentissage automatique. Les tracés ALE sont une alternative plus rapide et impartiale aux tracés de dépendance partielle (PDP).</p>
<p>Je recommande de lire d’abord le <a href="../08-global_model_agnostic_methods/08.1-pdp.html">chapitre sur les diagrammes de dépendance partielle</a>, car ils sont plus faciles à comprendre et les deux méthodes partagent le même objectif : les deux décrivent comment une caractéristique affecte la prédiction en moyenne. Dans la section suivante, je veux vous convaincre que les diagrammes de dépendance partielle présentent un sérieux problème lorsque les caractéristiques sont corrélées.</p>
<section id="motivation-et-intuition" class="level3">
<h3 class="anchored" data-anchor-id="motivation-et-intuition">8.2.1 - Motivation et intuition</h3>
<p>Si les caractéristiques d’un modèle d’apprentissage automatique sont corrélées, le tracé de dépendance partielle n’est pas fiable. Le calcul d’un diagramme de dépendance partielle pour une caractéristique fortement corrélée à d’autres caractéristiques implique de faire la moyenne des prédictions d’instances de données artificielles qui sont improbables dans la réalité. Cela peut grandement biaiser l’effet de fonctionnalité estimé. Imaginez calculer des tracés de dépendance partielle pour un modèle d’apprentissage automatique qui prédit la valeur d’une maison en fonction du nombre de pièces et de la taille de la surface habitable. Nous nous intéressons à l’effet de la surface habitable sur la valeur prédite. Pour rappel, la recette des tracés de dépendance partielle est la suivante :</p>
<ol type="1">
<li>Sélectionnez la fonctionnalité.</li>
<li>Définir la grille.</li>
<li>Par valeur de grille :
<ol type="a">
<li>Remplacez la fonctionnalité par la valeur de grille et</li>
<li>les prédictions moyennes.</li>
</ol></li>
<li>Dessinez une courbe. Pour le calcul de la première valeur de grille du PDP – disons 30 m 2 – nous remplaçons la surface habitable pour toutes les instances par 30 m 2 , même pour les maisons de 10 pièces. Cela me semble être une maison très inhabituelle. Le graphique de dépendance partielle inclut ces maisons irréalistes dans l’estimation des effets de caractéristiques et prétend que tout va bien. La figure suivante illustre deux caractéristiques corrélées et comment il se fait que la méthode du diagramme de dépendance partielle fait la moyenne des prédictions d’instances improbables.</li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../_static/images2/8_2_1_figure_1.png" class="img-fluid figure-img" data-align="center"></p>
<figcaption>Caractéristiques fortement corrélées x1 et x2. Pour calculer l’effet caractéristique de x1 à 0,75, le PDP remplace x1 de toutes les instances par 0,75, en supposant à tort que la distribution de x2 à x1 = 0,75 est la même que la distribution marginale de x2 (ligne verticale). Cela aboutit à des combinaisons improbables de x1 et x2 (par exemple x2=0,2 à x1=0,75), que le PDP utilise pour le calcul de l’effet moyen.</figcaption>
</figure>
</div>
<p>Que pouvons-nous faire pour obtenir une estimation de l’effet des caractéristiques qui respecte la corrélation des caractéristiques ? Nous pourrions faire la moyenne sur la distribution conditionnelle de la fonctionnalité, c’est-à-dire qu’à une valeur de grille de x1, nous faisons la moyenne des prédictions d’instances avec une valeur x1 similaire. La solution pour calculer les effets de caractéristiques à l’aide de la distribution conditionnelle est appelée Marginal Plots, ou M-Plots (nom déroutant, car ils sont basés sur la distribution conditionnelle et non sur la distribution marginale). Attends, je ne t’ai pas promis de parler des complots ALE ? Les M-Plots ne sont pas la solution que nous recherchons. Pourquoi les M-Plots ne résolvent-ils pas notre problème ? Si l’on fait la moyenne des prévisions de toutes les maisons d’environ 30 m 2 , on estime l’ effet combiné de la surface habitable et du nombre de pièces, du fait de leur corrélation. Supposons que la surface habitable n’ait aucun effet sur la valeur prédite d’une maison, seul le nombre de pièces en ait un. Le M-Plot montrerait toujours que la taille de la surface habitable augmente la valeur prédite, puisque le nombre de pièces augmente avec la surface habitable. Le graphique suivant montre pour deux fonctionnalités corrélées le fonctionnement des M-Plots.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../_static/images2/8_2_1_figure_2.png" class="img-fluid figure-img" data-align="center"></p>
<figcaption>Caractéristiques fortement corrélées x1 et x2. M-Plots fait la moyenne sur la distribution conditionnelle. Ici, la distribution conditionnelle de x2 à x1 = 0,75. La moyenne des prédictions locales conduit à mélanger les effets des deux caractéristiques.</figcaption>
</figure>
</div>
<p>Les M-Plots évitent de faire la moyenne des prédictions d’instances de données improbables, mais ils mélangent l’effet d’une fonctionnalité avec les effets de toutes les fonctionnalités corrélées. Les tracés ALE résolvent ce problème en calculant – également sur la base de la distribution conditionnelle des caractéristiques – les différences de prédictions au lieu des moyennes . Pour l’effet de la surface habitable de 30 m 2 , la méthode ALE utilise toutes les maisons d’environ 30 m 2 et obtient les prédictions du modèle prétendant que ces maisons faisaient 31 m 2 moins la prédiction prétendant qu’elles faisaient 29 m 2 . Cela nous donne l’effet pur de l’espace de vie et ne mélange pas l’effet avec les effets des éléments corrélés. L’utilisation de différences bloque l’effet d’autres fonctionnalités. Le graphique suivant donne une idée de la façon dont les tracés ALE sont calculés.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../_static/images2/8_2_1_figure_3.png" class="img-fluid figure-img" data-align="center"></p>
<figcaption>Calcul de l’ALE pour la caractéristique x1, qui est corrélée à x2. Tout d’abord, nous divisons l’entité en intervalles (lignes verticales). Pour les instances de données (points) dans un intervalle, nous calculons la différence de prédiction lorsque nous remplaçons l’entité par les limites supérieure et inférieure de l’intervalle (lignes horizontales). Ces différences sont ensuite accumulées et centrées, ce qui donne la courbe ALE.</figcaption>
</figure>
</div>
<p>Pour résumer comment chaque type de tracé (PDP, M, ALE) calcule l’effet d’une caractéristique à une certaine valeur de grille v :<br> <strong>Tracés de dépendance partielle</strong> : « Laissez-moi vous montrer ce que le modèle prédit en moyenne lorsque chaque instance de données a la valeur v pour cette fonctionnalité. J’ignore si la valeur v a un sens pour toutes les instances de données.<br> <strong>M-Plots</strong> : « Laissez-moi vous montrer ce que le modèle prédit en moyenne pour les instances de données qui ont des valeurs proches de v pour cette fonctionnalité. L’effet pourrait être dû à cette fonctionnalité, mais également à des fonctionnalités corrélées.<br> <strong>Tracés ALE </strong>: “Permettez-moi de vous montrer comment les prédictions du modèle changent dans une petite” fenêtre “de la fonctionnalité autour de v pour les instances de données dans cette fenêtre.”</p>
</section>
<section id="théorie" class="level3">
<h3 class="anchored" data-anchor-id="théorie">8.2.2 - Théorie</h3>
<p>En quoi les tracés PD, M et ALE diffèrent-ils mathématiquement ? Le point commun aux trois méthodes est qu’elles réduisent la fonction de prédiction complexe f à une fonction qui ne dépend que d’une (ou deux) caractéristiques. Les trois méthodes réduisent la fonction en faisant la moyenne des effets des autres caractéristiques, mais elles diffèrent selon que les moyennes des prédictions ou les <strong>différences de prédictions</strong> sont calculées et si la moyenne est effectuée sur la distribution marginale ou conditionnelle.</p>
<p>Les diagrammes de dépendance partielle font la moyenne des prédictions sur la distribution marginale.</p>
<p><span class="math display">\[\begin{align*}
\hat{f}_{S,PDP}(x) &amp;=&amp; E_{X_C}\left[\hat{f}(x_S,X_C)\right] \\
&amp;=&amp; \int_{X_C}\hat{f}(x_S,X_C)d\mathbb{P}(X_C)
\end{align*}\]</span></p>
<p>Il s’agit de la valeur de la fonction de prédiction f, à la ou aux valeurs de caractéristiques. <span class="math inline">\(x_S\)</span>, en moyenne sur toutes les fonctionnalités de <span class="math inline">\(X_C\)</span> (ici traitées comme des variables aléatoires). Faire la moyenne signifie calculer l’espérance marginale E sur les caractéristiques de l’ensemble C, qui est l’intégrale des prédictions pondérées par la distribution de probabilité. Cela semble sophistiqué, mais pour calculer la valeur attendue sur la distribution marginale, nous prenons simplement toutes nos instances de données, les forçons à avoir une certaine valeur de grille pour les caractéristiques de l’ensemble S et faisons la moyenne des prédictions pour cet ensemble de données manipulé. Cette procédure garantit que nous faisons la moyenne sur la distribution marginale des caractéristiques.</p>
<p>Les M-plots font la moyenne des prédictions sur la distribution conditionnelle.</p>
<p><span class="math display">\[\begin{align*}
\hat{f}_{S,M}(x_S) &amp;=&amp; E_{X_C|X_S}\left[\hat{f}(X_S,X_C)|X_S=x_s\right] \\
&amp;=&amp;\int_{X_C}\hat{f}(x_S, X_C)d\mathbb{P}(X_C|X_S = x_S)\end{align*}\]</span></p>
<p>La seule chose qui change par rapport aux PDP est que nous faisons la moyenne des prédictions conditionnelles à chaque valeur de grille de l’entité d’intérêt, au lieu de supposer la distribution marginale à chaque valeur de grille. En pratique, cela signifie qu’il faut définir un quartier, par exemple pour le calcul de l’effet de 30 m 2 sur la valeur prédite de la maison, on pourrait faire la moyenne des prédictions de toutes les maisons entre 28 et 32 ​​m 2 .</p>
<p>Les tracés ALE font la moyenne des changements dans les prédictions et les accumulent sur la grille (nous reviendrons sur le calcul plus tard).</p>
<p><span class="math display">\[\begin{align*}
\hat{f}_{S,ALE}(x_S) &amp;=&amp; \int_{z_{0,S}}^{x_S}E_{X_C|X_S = x_S}\left[\hat{f}^S(X_s,X_c)|X_S=z_S\right]dz_S-\text{constant}\\
&amp;=&amp; \int_{z_{0,S}}^{x_S}(\int_{x_C}\hat{f}^S(z_s,X_c)d\mathbb{P}(X_C|X_S = z_S)d{})dz_S-\text{constant}
\end{align*}\]</span></p>
<p>La formule révèle trois différences par rapport aux M-Plots. Premièrement, nous faisons la moyenne des changements de prédictions, et non des prédictions elles-mêmes. Le changement est défini comme la dérivée partielle (mais plus tard, pour le calcul proprement dit, remplacée par les différences dans les prédictions sur un intervalle).</p>
<p><span class="math display">\[\hat{f}^S(x_s,x_c)=\frac{\partial\hat{f}(x_S,x_C)}{\partial{}x_S}\]</span></p>
<p>La deuxième différence est l’intégrale supplémentaire sur z. Nous accumulons les dérivées partielles locales sur la plage de caractéristiques de l’ensemble S, ce qui nous donne l’effet de la caractéristique sur la prédiction. Pour le calcul proprement dit, les z sont remplacés par une grille d’intervalles sur laquelle nous calculons les changements dans la prédiction. Au lieu de faire directement la moyenne des prédictions, la méthode ALE calcule les différences de prédiction conditionnelles aux caractéristiques S et intègre la dérivée sur les caractéristiques S pour estimer l’effet. Eh bien, cela semble stupide. La dérivation et l’intégration s’annulent généralement, comme si l’on soustrayait d’abord, puis ajoutait le même nombre. Pourquoi est-ce que cela a du sens ici ? La dérivée (ou différence d’intervalle) isole l’effet de la caractéristique d’intérêt et bloque l’effet des caractéristiques corrélées.</p>
<p>La troisième différence entre les tracés ALE et les tracés M est que nous soustrayons une constante des résultats. Cette étape centre le tracé ALE de sorte que l’effet moyen sur les données soit nul.</p>
<p>Un problème demeure : tous les modèles ne sont pas accompagnés d’un dégradé, par exemple les forêts aléatoires n’ont pas de dégradé. Mais comme vous le verrez, le calcul réel fonctionne sans gradients et utilise des intervalles. Approfondissons un peu l’estimation des tracés ALE.</p>
</section>
<section id="estimation" class="level3">
<h3 class="anchored" data-anchor-id="estimation">8.2.3 - Estimation</h3>
<p>Je décrirai d’abord comment les tracés ALE sont estimés pour une seule caractéristique numérique, puis pour deux caractéristiques numériques et pour une seule caractéristique catégorielle. Pour estimer les effets locaux, nous divisons la caractéristique en plusieurs intervalles et calculons les différences dans les prédictions. Cette procédure se rapproche des dérivées et fonctionne également pour les modèles sans dérivées.</p>
<p>Nous estimons d’abord l’effet non centré :</p>
<p><span class="math display">\[\hat{\tilde{f}}_{j,ALE}(x)=\sum_{k=1}^{k_j(x)}\frac{1}{n_j(k)}\sum_{i:x_{j}^{(i)}\in{}N_j(k)}\left[\hat{f}(z_{k,j},x^{(i)}_{-j})-\hat{f}(z_{k-1,j},x^{(i)}_{-j})\right]\]</span></p>
<p>Décomposons cette formule en commençant par le côté droit. Le nom <strong>Accumulated Local Effects</strong> reflète joliment tous les composants individuels de cette formule. À la base, la méthode ALE calcule les différences dans les prédictions, grâce à quoi nous remplaçons la caractéristique d’intérêt par les valeurs de grille z. La différence de prédiction correspond à l’<strong>effet</strong> que la fonctionnalité a sur une instance individuelle dans un certain intervalle. La somme de droite additionne les effets de toutes les instances dans un intervalle qui apparaît dans la formule comme voisinage. <span class="math inline">\(N_j(k)\)</span>. Nous divisons cette somme par le nombre d’instances dans cet intervalle pour obtenir la différence moyenne des prédictions pour cet intervalle. Cette moyenne dans l’intervalle est couverte par le terme <strong>Local</strong> dans le nom ALE. Le symbole de somme de gauche signifie que nous accumulons les effets moyens sur tous les intervalles. L’ALE (non centrée) d’une valeur de caractéristique qui se situe, par exemple, dans le troisième intervalle est la somme des effets des premier, deuxième et troisième intervalles. Le mot <strong>Accumulé</strong> dans ALE reflète cela.</p>
<p>Cet effet est centré pour que l’effet moyen soit nul.</p>
<p><span class="math display">\[\hat{f}_{j,ALE}(x)=\hat{\tilde{f}}_{j,ALE}(x)-\frac{1}{n}\sum_{i=1}^{n}\hat{\tilde{f}}_{j,ALE}(x^{(i)}_{j})\]</span></p>
<p>La valeur de l’ALE peut être interprétée comme l’effet principal de la fonctionnalité à une certaine valeur par rapport à la prédiction moyenne des données. Par exemple, une estimation ALE de -2 à <span class="math inline">\(x_j=3\)</span> signifie que lorsque la j-ième caractéristique a la valeur 3, alors la prédiction est inférieure de 2 par rapport à la prédiction moyenne.</p>
<p>Les quantiles de la distribution de l’entité sont utilisés comme grille qui définit les intervalles. L’utilisation des quantiles garantit qu’il y a le même nombre d’instances de données dans chacun des intervalles. Les quantiles présentent l’inconvénient que les intervalles peuvent avoir des longueurs très différentes. Cela peut conduire à des tracés ALE étranges si la caractéristique d’intérêt est très asymétrique, par exemple de nombreuses valeurs faibles et seulement quelques valeurs très élevées.</p>
<p><strong>Graphiques ALE pour l’interaction de deux fonctionnalités</strong></p>
<p>Les tracés ALE peuvent également montrer l’effet d’interaction de deux entités. Les principes de calcul sont les mêmes que pour une entité simple, mais nous travaillons avec des cellules rectangulaires au lieu d’intervalles, car nous devons cumuler les effets en deux dimensions. En plus d’ajuster l’effet moyen global, nous ajustons également les effets principaux des deux caractéristiques. Cela signifie que l’ALE pour deux fonctionnalités estime l’effet de second ordre, qui n’inclut pas les principaux effets des fonctionnalités. En d’autres termes, l’ALE pour deux fonctionnalités montre uniquement l’effet d’interaction supplémentaire des deux fonctionnalités. Je vous épargne les formules des tracés ALE 2D car elles sont longues et désagréables à lire. Si le calcul vous intéresse, je vous renvoie au papier, formules (13) – (16). Je m’appuierai sur des visualisations pour développer l’intuition sur le calcul ALE du second ordre.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../_static/images2/8_2_3_figure_4.png" class="img-fluid figure-img" data-align="center"></p>
<figcaption>Calcul de 2D-ALE. Nous plaçons une grille sur les deux entités. Dans chaque cellule de la grille, nous calculons les différences de 2e ordre pour toutes les instances qu’elle contient. Nous remplaçons d’abord les valeurs de x1 et x2 par les valeurs des coins des cellules. Si a, b, c et d représentent les prédictions de « coin » d’une instance manipulée (comme indiqué dans le graphique), alors la différence du 2ème ordre est (d - c) - (b - a). La différence moyenne du 2ème ordre dans chaque cellule est accumulée sur la grille et centrée.</figcaption>
</figure>
</div>
<p>Dans la figure précédente, de nombreuses cellules sont vides en raison de la corrélation. Dans le tracé ALE, cela peut être visualisé avec une case grisée ou sombre. Vous pouvez également remplacer l’estimation ALE manquante d’une cellule vide par l’estimation ALE de la cellule non vide la plus proche.</p>
<p>Étant donné que les estimations ALE pour deux caractéristiques ne montrent que l’effet de second ordre des caractéristiques, l’interprétation nécessite une attention particulière. L’effet de second ordre est l’effet d’interaction supplémentaire des fonctionnalités après avoir pris en compte les principaux effets des fonctionnalités. Supposons que deux caractéristiques n’interagissent pas, mais que chacune ait un effet linéaire sur le résultat prédit. Dans le tracé ALE 1D pour chaque entité, nous verrions une ligne droite comme courbe ALE estimée. Mais lorsque nous traçons les estimations ALE 2D, elles devraient être proches de zéro, car l’effet de second ordre n’est que l’effet supplémentaire de l’interaction. Les tracés ALE et PD diffèrent à cet égard : les PDP montrent toujours l’effet total, les tracés ALE montrent l’effet de premier ou de second ordre. Ce sont des décisions de conception qui ne dépendent pas des mathématiques sous-jacentes. Vous pouvez soustraire les effets d’ordre inférieur dans un diagramme de dépendance partielle pour obtenir les effets principaux ou secondaires purs ou, vous pouvez obtenir une estimation du total des diagrammes ALE en vous abstenant de soustraire les effets d’ordre inférieur.</p>
<p>Les effets locaux accumulés pourraient également être calculés pour des ordres arbitrairement supérieurs (interactions de trois caractéristiques ou plus), mais comme indiqué dans le <a href="../08-global_model_agnostic_methods/08.1-pdp.html">chapitre PDP</a>, seulement deux caractéristiques au maximum ont du sens, car les interactions supérieures ne peuvent pas être visualisées ni même interprétées de manière significative.</p>
<p><strong>ALE pour les fonctionnalités catégorielles</strong></p>
<p>La méthode des effets locaux accumulés nécessite – par définition – que les valeurs des caractéristiques aient un ordre, car la méthode accumule les effets dans une certaine direction. Les caractéristiques catégorielles n’ont aucun ordre naturel. Pour calculer un tracé ALE pour une caractéristique catégorielle, nous devons d’une manière ou d’une autre créer ou trouver un ordre. L’ordre des catégories influence le calcul et l’interprétation des effets locaux accumulés.</p>
<p>Une solution consiste à classer les catégories en fonction de leur similarité en fonction des autres caractéristiques. La distance entre deux catégories est la somme des distances de chaque entité. La distance par caractéristique compare soit la distribution cumulative dans les deux catégories, également appelée distance de Kolmogorov-Smirnov (pour les caractéristiques numériques), soit les tableaux de fréquences relatives (pour les caractéristiques catégorielles). Une fois que nous avons les distances entre toutes les catégories, nous utilisons une mise à l’échelle multidimensionnelle pour réduire la matrice de distance à une mesure de distance unidimensionnelle. Cela nous donne un ordre des catégories basé sur la similarité.</p>
<p>Pour rendre cela un peu plus clair, voici un exemple : supposons que nous ayons les deux caractéristiques catégorielles « saison » et « météo » et une caractéristique numérique « température ». Pour la première caractéristique catégorielle (saison), nous souhaitons calculer les ALE. La fonctionnalité comporte les catégories « printemps », « été », « automne » et « hiver ». Nous commençons par calculer la distance entre les catégories « printemps » et « été ». La distance est la somme des distances sur les caractéristiques température et météo. Pour la température, nous prenons toutes les instances avec la saison « printemps », calculons la fonction de distribution cumulée empirique et faisons de même pour les instances avec la saison « été » et mesurons leur distance avec la statistique de Kolmogorov-Smirnov. Pour la fonction météo, nous calculons pour toutes les instances « printemps » les probabilités pour chaque type de temps, faisons de même pour les instances « été » et résumons les distances absolues dans la distribution de probabilité. Si le « printemps » et « l’été » ont des températures et des conditions météorologiques très différentes, la distance totale par catégorie est grande. Nous répétons la procédure avec les autres paires saisonnières et réduisons la matrice de distance résultante à une seule dimension par mise à l’échelle multidimensionnelle.</p>
</section>
<section id="exemples" class="level3">
<h3 class="anchored" data-anchor-id="exemples">8.2.4 - Exemples</h3>
<p>Voyons les complots ALE en action. J’ai construit un scénario dans lequel les tracés de dépendance partielle échouent. Le scénario se compose d’un modèle de prédiction et de deux fonctionnalités fortement corrélées. Le modèle de prédiction est principalement un modèle de régression linéaire, mais il fait quelque chose de bizarre en combinant les deux caractéristiques pour lesquelles nous n’avons jamais observé d’instances.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../_static/images2/8_2_4_figure_5.png" class="img-fluid figure-img" data-align="center"></p>
<figcaption>Deux caractéristiques et le résultat prévu. Le modèle prédit la somme des deux caractéristiques (fond ombré), à la différence que si x1 est supérieur à 0,7 et x2 inférieur à 0,3, le modèle prédit toujours 2. Cette zone est éloignée de la distribution des données (nuage de points) et n’affecte pas les performances du modèle et ne devrait pas non plus affecter son interprétation.</figcaption>
</figure>
</div>
<p>Est-ce un scénario réaliste et pertinent ? Lorsque vous entraînez un modèle, l’algorithme d’apprentissage minimise la perte des instances de données d’entraînement existantes. Des choses étranges peuvent se produire en dehors de la distribution des données d’entraînement, car le modèle n’est pas pénalisé pour avoir fait des choses étranges dans ces domaines. Quitter la distribution des données est appelé extrapolation, qui peut également être utilisée pour tromper les modèles d’apprentissage automatique, décrits dans le <a href="../10-neuralnet/10.4-adversarial-examples.html">chapitre sur les exemples contradictoires</a>. Voyez dans notre petit exemple comment les tracés de dépendance partielle se comportent par rapport aux tracés ALE.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../_static/images2/8_2_4_figure_6.png" class="img-fluid figure-img" data-align="center"></p>
<figcaption>Comparaison des effets de caractéristiques calculés avec PDP (ligne supérieure) et ALE (ligne inférieure). Les estimations du PDP sont influencées par le comportement étrange du modèle en dehors de la distribution des données (sauts abrupts dans les tracés). Les tracés ALE identifient correctement que le modèle d’apprentissage automatique a une relation linéaire entre les fonctionnalités et la prédiction, ignorant les zones sans données.</figcaption>
</figure>
</div>
<p>Mais n’est-il pas intéressant de voir que notre modèle se comporte bizarrement à x1 &gt; 0,7 et x2 &lt; 0,3 ? Eh bien, oui et non. Puisqu’il s’agit d’instances de données qui pourraient être physiquement impossibles ou du moins extrêmement improbables, il n’est généralement pas pertinent de les examiner. Mais si vous pensez que la distribution de vos tests peut être légèrement différente et que certaines instances se situent réellement dans cette plage, il serait alors intéressant d’inclure cette zone dans le calcul des effets des fonctionnalités. Mais cela doit être une décision consciente d’inclure des zones pour lesquelles nous n’avons pas encore observé de données et cela ne devrait pas être un effet secondaire de la méthode choisie comme le PDP. Si vous pensez que le modèle sera utilisé ultérieurement avec des données distribuées différemment, je vous recommande d’utiliser des tracés ALE et de simuler la distribution des données que vous attendez.</p>
<p>En nous tournant vers un ensemble de données réelles, prévoyons le <a href="../04-datasets/04.1-datasets.html">nombre de vélos loués</a> en fonction de la météo et du jour et vérifions si les tracés ALE fonctionnent vraiment aussi bien que promis. Nous formons un arbre de régression pour prédire le nombre de vélos loués un jour donné et utilisons des tracés ALE pour analyser comment la température, l’humidité relative et la vitesse du vent influencent les prévisions. Regardons ce que disent les tracés ALE :</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../_static/images2/8_2_4_figure_7.png" class="img-fluid figure-img" data-align="center"></p>
<figcaption>Graphiques ALE pour le modèle de prévision du vélo par température, humidité et vitesse du vent. La température a un effet important sur la prévision. La prévision moyenne augmente avec la température, mais retombe au-dessus de 25 degrés Celsius. L’humidité a un effet négatif : lorsqu’elle est supérieure à 60 %, plus l’humidité relative est élevée, plus la prévision est faible. La vitesse du vent n’affecte pas beaucoup les prévisions.</figcaption>
</figure>
</div>
<p>Examinons la corrélation entre la température, l’humidité et la vitesse du vent ainsi que toutes les autres caractéristiques. Étant donné que les données contiennent également des caractéristiques catégorielles, nous ne pouvons pas utiliser uniquement le coefficient de corrélation de Pearson, qui ne fonctionne que si les deux caractéristiques sont numériques. Au lieu de cela, j’entraîne un modèle linéaire pour prédire, par exemple, la température en fonction de l’une des autres caractéristiques en entrée. Ensuite, je mesure la variance expliquée par l’autre caractéristique du modèle linéaire et je prends la racine carrée. Si l’autre caractéristique était numérique, alors le résultat est égal à la valeur absolue du coefficient de corrélation standard de Pearson. Mais cette approche basée sur un modèle de « variance expliquée » (également appelée ANOVA, qui signifie ANalysis Of VAriance) fonctionne même si l’autre caractéristique est catégorique. La mesure « variance expliquée » se situe toujours entre 0 (pas d’association) et 1 (la température peut être parfaitement prédite à partir de l’autre caractéristique). Nous calculons la variance expliquée de la température, de l’humidité et de la vitesse du vent avec toutes les autres caractéristiques. Plus la variance expliquée (corrélation) est élevée, plus il y a de problèmes (potentiels) avec les tracés PD. La figure suivante montre dans quelle mesure les caractéristiques météorologiques sont corrélées avec d’autres caractéristiques.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../_static/images2/8_2_4_figure_8.png" class="img-fluid figure-img" data-align="center"></p>
<figcaption>La force de la corrélation entre la température, l’humidité et la vitesse du vent avec toutes les caractéristiques, mesurée comme la quantité de variance expliquée, lorsque nous entraînons un modèle linéaire avec par exemple la température à prédire et la saison comme caractéristique. Pour la température, nous observons – sans surprise – une forte corrélation avec la saison et le mois. L’humidité est en corrélation avec la situation météorologique.</figcaption>
</figure>
</div>
<p>Cette analyse de corrélation révèle que nous pouvons rencontrer des problèmes avec les diagrammes de dépendance partielle, notamment pour la caractéristique de température. Eh bien, voyez par vous-même :</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../_static/images2/8_2_4_figure_9.png" class="img-fluid figure-img" data-align="center"></p>
<figcaption>PDP pour la température, l’humidité et la vitesse du vent. Par rapport aux tracés ALE, les PDP montrent une diminution plus faible du nombre prévu de vélos en cas de température ou d’humidité élevée. Le PDP utilise toutes les instances de données pour calculer l’effet des températures élevées, même s’il s’agit, par exemple, d’instances avec la saison « hiver ». Les tracés ALE sont plus fiables.</figcaption>
</figure>
</div>
<p>Voyons ensuite les tracés ALE en action pour une fonctionnalité catégorielle. Le mois est une caractéristique catégorielle dont nous souhaitons analyser l’effet sur le nombre de vélos prévu. On peut soutenir que les mois ont déjà un certain ordre (janvier à décembre), mais essayons de voir ce qui se passe si nous réordonnons d’abord les catégories par similarité, puis calculons les effets. Les mois sont classés selon la similitude des jours de chaque mois en fonction d’autres caractéristiques, telles que la température ou s’il s’agit d’un jour férié.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../_static/images2/8_2_4_figure_10.png" class="img-fluid figure-img" data-align="center"></p>
<figcaption>Graphique ALE pour le mois caractéristique catégoriel. Les mois sont classés en fonction de leur similarité les uns par rapport aux autres, en fonction des répartitions des autres fonctionnalités par mois. On observe que janvier, mars et avril, mais surtout décembre et novembre, ont un effet moindre sur le nombre prévu de vélos loués par rapport aux autres mois.</figcaption>
</figure>
</div>
<p>Étant donné que de nombreuses caractéristiques sont liées à la météo, l’ordre des mois reflète fortement la similitude des conditions météorologiques entre les mois. Tous les mois les plus froids se trouvent sur le côté gauche (de février à avril) et les mois les plus chauds sur le côté droit (d’octobre à août). Gardez à l’esprit que des caractéristiques non météorologiques ont également été incluses dans le calcul de similarité, par exemple la fréquence relative des vacances a le même poids que la température pour calculer la similarité entre les mois.</p>
<p>Nous considérons ensuite l’effet de second ordre de l’humidité et de la température sur le nombre prévu de vélos. N’oubliez pas que l’effet de second ordre est l’effet d’interaction supplémentaire des deux fonctionnalités et n’inclut pas les effets principaux. Cela signifie que, par exemple, vous ne verrez pas l’effet principal selon lequel une humidité élevée entraîne en moyenne un nombre inférieur de vélos prévus dans le tracé ALE de second ordre.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../_static/images2/8_2_4_figure_11.png" class="img-fluid figure-img" data-align="center"></p>
<figcaption>Graphique ALE pour l’effet du 2ème ordre de l’humidité et de la température sur le nombre prévu de vélos loués. Une teinte plus claire indique une prévision supérieure à la moyenne et une teinte plus foncée une prévision inférieure à la moyenne lorsque les principaux effets sont déjà pris en compte. Le graphique révèle une interaction entre la température et l’humidité : un temps chaud et humide augmente la prévision. Par temps froid et humide, un effet négatif supplémentaire sur le nombre de vélos prévu est constaté.</figcaption>
</figure>
</div>
<p>Gardez à l’esprit que les deux principaux effets de l’humidité et de la température indiquent que le nombre prévu de vélos diminue par temps très chaud et humide. Par temps chaud et humide, l’effet combiné de la température et de l’humidité n’est donc pas la somme des effets principaux, mais plus important que la somme. Pour souligner la différence entre l’effet pur du second ordre (le tracé ALE 2D que vous venez de voir) et l’effet total, regardons le tracé de dépendance partielle. Le PDP montre l’effet total, qui combine la prédiction moyenne, les deux effets principaux et l’effet de second ordre (l’interaction).</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../_static/images2/8_2_4_figure_12.png" class="img-fluid figure-img" data-align="center"></p>
<figcaption>PDP de l’effet total de la température et de l’humidité sur le nombre prévu de vélos. Le tracé combine l’effet principal de chacune des caractéristiques et leur effet d’interaction, contrairement au tracé 2D-ALE qui ne montre que l’interaction.</figcaption>
</figure>
</div>
<p>Si vous n’êtes intéressé que par l’interaction, vous devriez examiner les effets de second ordre, car l’effet total mélange les effets principaux dans l’intrigue. Mais si vous voulez connaître l’effet combiné des fonctionnalités, vous devez regarder l’effet total (que montre le PDP). Par exemple, si vous souhaitez connaître le nombre prévu de vélos à 30 degrés Celsius et 80 % d’humidité, vous pouvez le lire directement à partir du PDP 2D. Si vous souhaitez lire la même chose à partir des tracés ALE, vous devez examiner trois tracés : le tracé ALE pour la température, pour l’humidité et pour la température + humidité et vous devez également connaître la prévision moyenne globale. Dans un scénario dans lequel deux éléments n’ont aucune interaction, le tracé des effets totaux des deux éléments pourrait être trompeur car il montre probablement un paysage complexe, suggérant une certaine interaction, mais il s’agit simplement du produit des deux effets principaux. L’effet du second ordre montrerait immédiatement qu’il n’y a pas d’interaction.</p>
<p>Assez de vélos pour l’instant, passons à une tâche de classification. Nous formons une forêt aléatoire pour prédire la probabilité de cancer du col de l’utérus en fonction de facteurs de risque. Nous visualisons les effets locaux accumulés pour deux des fonctionnalités :</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../_static/images2/8_2_4_figure_13.png" class="img-fluid figure-img" data-align="center"></p>
<figcaption>Graphiques ALE pour l’effet de l’âge et des années d’utilisation des contraceptifs hormonaux sur la probabilité prédite de cancer du col de l’utérus. Pour la caractéristique âge, le graphique ALE montre que la probabilité prévue de cancer est faible en moyenne jusqu’à 40 ans et augmente par la suite. Le nombre d’années passées sous contraceptifs hormonaux est associé à un risque de cancer prédit plus élevé après 8 ans.</figcaption>
</figure>
</div>
<p>Nous examinons ensuite l’interaction entre le nombre de grossesses et l’âge.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../_static/images2/8_2_4_figure_14.png" class="img-fluid figure-img" data-align="center"></p>
<figcaption>Graphique ALE de l’effet du 2ème ordre du nombre de grossesses et de l’âge. L’interprétation de l’intrigue est un peu peu concluante, montrant ce qui semble être un surapprentissage. Par exemple, le graphique montre un comportement de modèle étrange entre 18 et 20 ans et plus de 3 grossesses (jusqu’à 5 points de pourcentage d’augmentation de la probabilité de cancer). Il n’y a pas beaucoup de femmes dans les données avec cette constellation d’âge et de nombre de grossesses (les données réelles sont affichées sous forme de points), donc le modèle n’est pas sévèrement pénalisé pendant la formation pour avoir commis des erreurs avec ces femmes.</figcaption>
</figure>
</div>
</section>
<section id="avantages" class="level3">
<h3 class="anchored" data-anchor-id="avantages">8.2.5 - Avantages</h3>
<p><strong>Les tracés ALE sont impartiaux</strong>, ce qui signifie qu’ils fonctionnent toujours lorsque les caractéristiques sont corrélées. Les tracés de dépendance partielle échouent dans ce scénario car ils marginalisent des combinaisons improbables, voire physiquement impossibles, de valeurs de caractéristiques.</p>
<p><strong>Les tracés ALE sont plus rapides à calculer</strong> que les PDP et évoluent avec O(n), puisque le plus grand nombre possible d’intervalles est le nombre d’instances avec un intervalle par instance. Le PDP nécessite n fois le nombre d’estimations de points de grille. Pour 20 points de grille, les PDP nécessitent 20 fois plus de prédictions que le pire des cas de tracé ALE où autant d’intervalles que d’instances sont utilisés.</p>
<p><strong>L’ interprétation des tracés ALE est claire</strong> : conditionnellement à une valeur donnée, l’effet relatif du changement de caractéristique sur la prédiction peut être lu à partir du tracé ALE. <strong>Les tracés ALE sont centrés sur zéro</strong>. Cela rend leur interprétation intéressante, car la valeur en chaque point de la courbe ALE correspond à la différence par rapport à la prédiction moyenne. <strong>Le tracé ALE 2D montre uniquement l’interaction</strong> : Si deux entités n’interagissent pas, le tracé ne montre rien.</p>
<p>L’ensemble <strong>de la fonction de prédiction peut être décomposée</strong> en une somme de fonctions ALE de dimension inférieure, comme expliqué dans le chapitre sur <a href="../08-global_model_agnostic_methods/08.4-functional-decomposition.html">la décomposition fonctionnelle</a>.</p>
<p>Dans l’ensemble, dans la plupart des situations, je préférerais <strong>les tracés ALE aux PDP</strong>, car les fonctionnalités sont généralement corrélées dans une certaine mesure.</p>
</section>
<section id="inconvénients" class="level3">
<h3 class="anchored" data-anchor-id="inconvénients">8.2.6 - Inconvénients</h3>
<p>Une <strong>interprétation de l’effet sur plusieurs intervalles</strong> n’est pas autorisée si les caractéristiques sont fortement corrélées. Prenons le cas où vos caractéristiques sont fortement corrélées et où vous regardez l’extrémité gauche d’un tracé 1D-ALE. La courbe ALE pourrait inviter à l’interprétation erronée suivante : « La courbe ALE montre comment la prédiction change, en moyenne, lorsque nous modifions progressivement la valeur de la caractéristique respective pour une instance de données, tout en gardant les instances des autres valeurs de caractéristiques fixes. » Les effets sont calculés par intervalle (localement) et donc l’interprétation de l’effet ne peut être que locale. Pour plus de commodité, les effets par intervalle sont cumulés pour afficher une courbe lisse, mais gardez à l’esprit que chaque intervalle est créé avec différentes instances de données.</p>
<p>Les effets ALE <strong>peuvent différer des coefficients spécifiés dans un modèle de régression linéaire</strong> lorsque les caractéristiques interagissent et sont corrélées. Grömping (2020)<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a> a montré que dans un modèle linéaire avec deux caractéristiques corrélées et un terme d’interaction supplémentaire (<span class="math inline">\(\hat{f}(x) = \beta_0 + \beta_1 x_1 + \beta_2 x_2 + \beta_3 x_1 x_2\)</span>) les tracés ALE de premier ordre ne montrent pas de ligne droite. Au lieu de cela, ils sont légèrement incurvés car ils intègrent des parties de l’interaction multiplicative des caractéristiques. Pour comprendre ce qui se passe ici, je vous recommande de lire le chapitre sur <a href="../08-global_model_agnostic_methods/08.4-functional-decomposition.html">la décomposition des fonctions</a>. En bref, l’ALE définit les effets de premier ordre (ou 1D) différemment de la formule linéaire qui les décrit. Ce n’est pas nécessairement faux, car lorsque les caractéristiques sont corrélées, l’attribution des interactions n’est pas aussi claire. Mais il n’est certainement pas intuitif que l’ALE et le coefficient linéaire ne correspondent pas.</p>
<p><strong>Les tracés ALE peuvent devenir un peu fragiles</strong> (beaucoup de petits hauts et bas) avec un nombre élevé d’intervalles. Dans ce cas, la réduction du nombre d’intervalles rend les estimations plus stables, mais atténue et masque également une partie de la véritable complexité du modèle de prédiction. Il n’existe pas de solution parfaite pour définir le nombre d’intervalles . Si le nombre est trop petit, les tracés ALE risquent de ne pas être très précis. Si le nombre est trop élevé, la courbe peut devenir fragile.</p>
<p>Contrairement aux PDP, <strong>les tracés ALE ne sont pas accompagnés de courbes ICE</strong>. Pour les PDP, les courbes ICE sont excellentes car elles peuvent révéler une hétérogénéité dans l’effet des caractéristiques, ce qui signifie que l’effet d’une caractéristique semble différent pour des sous-ensembles de données. Pour les tracés ALE, vous pouvez uniquement vérifier par intervalle si l’effet est différent entre les instances, mais chaque intervalle a des instances différentes, ce n’est donc pas la même chose que les courbes ICE.</p>
<p><strong>Les estimations ALE de second ordre ont une stabilité variable dans l’espace des fonctionnalités, qui n’est en aucun cas visualisée</strong>. La raison en est que chaque estimation d’un effet local dans une cellule utilise un nombre différent d’instances de données. En conséquence, toutes les estimations ont une précision différente (mais elles restent les meilleures estimations possibles). Le problème existe dans une version moins grave pour les tracés ALE à effet principal. Le nombre d’instances est le même dans tous les intervalles, grâce à l’utilisation de quantiles comme grille, mais dans certaines zones, il y aura de nombreux intervalles courts et la courbe ALE sera composée de beaucoup plus d’estimations. Mais pour les intervalles longs, qui peuvent représenter une grande partie de la courbe entière, il y a comparativement moins d’instances. Cela s’est produit par exemple dans le graphique ALE de prédiction du cancer du col de l’utérus pour un âge élevé.</p>
<p><strong>Les tracés des effets de second ordre peuvent être un peu ennuyeux à interpréter</strong>, car il faut toujours garder les effets principaux à l’esprit. Il est tentant de lire les cartes thermiques comme l’effet total des deux fonctionnalités, mais il ne s’agit que de l’effet supplémentaire de l’interaction. L’effet de second ordre pur est intéressant pour découvrir et explorer les interactions, mais pour interpréter à quoi ressemble l’effet, je pense qu’il est plus logique d’intégrer les effets principaux dans l’intrigue.</p>
<p><strong>La mise en œuvre des tracés ALE est beaucoup plus complexe</strong> et moins intuitive que celle des tracés de dépendance partielle.</p>
<p>Même si les tracés ALE ne sont pas biaisés en cas de caractéristiques corrélées, <strong>l’interprétation reste difficile lorsque les caractéristiques sont fortement corrélées</strong>. Parce que s’ils ont une très forte corrélation, il est logique d’analyser l’effet de la modification des deux caractéristiques ensemble et non isolément. Cet inconvénient n’est pas spécifique aux tracés ALE, mais constitue un problème général de caractéristiques fortement corrélées.</p>
<p>Si les caractéristiques ne sont pas corrélées et que le temps de calcul ne pose pas de problème, les PDP sont légèrement préférables car ils sont plus faciles à comprendre et peuvent être tracés avec les courbes ICE.</p>
<p>La liste des inconvénients est devenue assez longue, mais ne vous laissez pas tromper par le nombre de mots que j’utilise : En règle générale : utilisez ALE au lieu de PDP.</p>
</section>
<section id="mise-en-œuvre-et-alternatives" class="level3">
<h3 class="anchored" data-anchor-id="mise-en-œuvre-et-alternatives">8.2.7 - Mise en œuvre et alternatives</h3>
<p>Ai-je mentionné que <a href="../08-global_model_agnostic_methods/08.1-pdp.html">les tracés de dépendance partielle</a> et <a href="../09-local_model_agnostic_methods/09.1-ice.html">les courbes d’espérances conditionnelles individuelles</a> sont une alternative ? =)</p>
<p>Les tracés ALE sont implémentés dans R dans le <a href="https://cran.r-project.org/web/packages/ALEPlot/index.html">package ALEPlot R</a> par l’inventeur lui-même et une fois dans le <a href="https://cran.r-project.org/web/packages/iml/index.html">package iml</a>. ALE dispose également d’au moins deux implémentations Python avec le <a href="https://github.com/blent-ai/ALEPython">package ALEPython</a> et dans <a href="https://docs.seldon.io/projects/alibi/en/stable/index.html">Alibi</a>.</p>
<!--  REFERENCES -->


</section>
</section>


<a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Retour au sommet</a><div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Notes de bas de page</h2>

<ol>
<li id="fn1"><p>Apley, Daniel W., and Jingyu Zhu. “Visualizing the effects of predictor variables in black box supervised learning models.” Journal of the Royal Statistical Society: Series B (Statistical Methodology) 82.4 (2020): 1059-1086.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>Grömping, Ulrike. “Model-Agnostic Effects Plots for Interpreting Machine Learning Models.” Reports in Mathematics, Physics and Chemistry: Department II, Beuth University of Applied Sciences Berlin. Report 1/2020 (2020)<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copié");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copié");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
          // target, if specified
          link.setAttribute("target", "_blank");
          if (link.getAttribute("rel") === null) {
            link.setAttribute("rel", "noopener");
          }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../08-global_model_agnostic_methods/08.1-pdp.html" class="pagination-link  aria-label=" 8.1="" -="" diagramme="" de="" dépendance="" partielle="" (pdp)"="">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">8.1 - Diagramme de dépendance partielle (PDP)</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../08-global_model_agnostic_methods/08.3-feature-interaction.html" class="pagination-link" aria-label="8.3 - Interactions avec les fonctionnalités">
        <span class="nav-page-text">8.3 - Interactions avec les fonctionnalités</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>