<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="fr" xml:lang="fr"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.43">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Apprentissage automatique interprétable – anchors</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../09-local_model_agnostic_methods/09.5-shapley.html" rel="next">
<link href="../09-local_model_agnostic_methods/09.3-counterfactual.html" rel="prev">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "Pas de résultats",
    "search-matching-documents-text": "documents trouvés",
    "search-copy-link-title": "Copier le lien vers la recherche",
    "search-hide-matches-text": "Cacher les correspondances additionnelles",
    "search-more-match-text": "correspondance de plus dans ce document",
    "search-more-matches-text": "correspondances de plus dans ce document",
    "search-clear-button-title": "Effacer",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Annuler",
    "search-submit-button-title": "Envoyer",
    "search-label": "Recherche"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Basculer la barre latérale" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../09-local_model_agnostic_methods/index.html">9 - Méthodes locales indépendantes du modèle</a></li><li class="breadcrumb-item"><a href="../09-local_model_agnostic_methods/09.4-anchors.html">9.4 - Règles de portée (ancres)</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Basculer la barre latérale" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Recherche" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">Apprentissage automatique interprétable</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Recherche"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../00-summary/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Résumé</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../01-preface/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1 - Préface de l’auteur</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../02-introduction/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2 - Introduction</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Basculer la section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../02-introduction/02.1-short_stories.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2.1 - Quelques histoires</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../02-introduction/02.2-ml_definitions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2.2 - Qu’est-ce que l’apprentissage automatique ?</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../02-introduction/02.3-terminology.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2.3 - Terminologie</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../03-interpretability/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">3 - Interprétabilité</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Basculer la section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../03-interpretability/03.1-importance_of_interpretability.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">3.1 - Importance de l’Interprétabilité</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../03-interpretability/03.2-taxonomy_of_interpretability_methods.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">3.2 - Taxonomie des Méthodes d’Interprétabilité</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../03-interpretability/03.3-scope_of_interpretability.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">3.3 - Portée de l’Interprétabilité</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../03-interpretability/03.4-evaluation_of_interpretability.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">3.4 - Evaluation de l’interprétabilité</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../03-interpretability/03.5-properties_of_explanations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">3.5 - Propriétés des Explications</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../03-interpretability/03.6-human_friendly_explanations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">3.6 - Explications conviviales pour l’être humain</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../04-datasets/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">4 - Jeux de données</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Basculer la section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../04-datasets/04.1-datasets.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">4.1 - Location de vélo (Régression)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../04-datasets/04.2-datasets.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">4.2 - Commentaires indésirables sur YouTube (Classification de Texte)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../04-datasets/04.3-datasets.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">4.3 - Facteurs de Risque du Cancer du Col de l’Uterus (Classification)</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../05-interpretable_models/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">5 - Modèles interprétables</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Basculer la section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../05-interpretable_models/05.1-linear-regression.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">5.1 - Régéression linéaire</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../05-interpretable_models/05.2-logistic-regression.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">5.2 - Régéression logistique</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../05-interpretable_models/05.3-glm-gam-more.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">5.3 - GLM, GAM et plus</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../05-interpretable_models/05.4-decision-tree.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">5.4 - Arbre de décision</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../05-interpretable_models/05.5-decision-rules.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">5.5 - Règles de décision</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../05-interpretable_models/05.6-rulefit.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">5.6 - Ajustement des règles</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../05-interpretable_models/05.7-other-interpretable-models.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">5.7 - Autres modèles interprétables</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../06-model_agnostic_methods/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">6 - Méthodes indépendantes du modèle</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../07-example/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">7 - Explications basées sur des exemples</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../08-global_model_agnostic_methods/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">8 - Méthodes globales indépendantes du modèle</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Basculer la section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../08-global_model_agnostic_methods/08.1-pdp.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">8.1 - Diagramme de dépendance partielle (PDP)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../08-global_model_agnostic_methods/08.2-ale.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">8.2 - Graphique des effets locaux accumulés (ALE)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../08-global_model_agnostic_methods/08.3-feature-interaction.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">8.3 - Interactions avec les fonctionnalités</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../08-global_model_agnostic_methods/08.4-functional-decomposition.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">8.4 - Functional Decomposition</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../08-global_model_agnostic_methods/08.5-permutation-feature-importance.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">8.5 - Décomposition fonctionnelle</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../08-global_model_agnostic_methods/08.6-global-surrogate.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">8.6 - Substitut global</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../08-global_model_agnostic_methods/08.7-prototype-criticisms.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">8.7 - Prototypes et critiques</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../09-local_model_agnostic_methods/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">9 - Méthodes locales indépendantes du modèle</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true" aria-label="Basculer la section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../09-local_model_agnostic_methods/09.1-ice.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">9.1 - Attente Conditionnelle Individuelle (<em>Individual Conditional Expectation - ICE</em>)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../09-local_model_agnostic_methods/09.2-lime.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">9.2 - Substitut local (LIME)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../09-local_model_agnostic_methods/09.3-counterfactual.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">9.3 - Explications contrefactuelles</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../09-local_model_agnostic_methods/09.4-anchors.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">9.4 - Règles de portée (ancres)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../09-local_model_agnostic_methods/09.5-shapley.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">9.5 - Valeurs de Shapley</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../09-local_model_agnostic_methods/09.6-shap.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">9.6 - SHAP (SHapley Additive exPlanations)</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../10-neuralnet/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">10 - Interprétation d'un réseau de neurone</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true" aria-label="Basculer la section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../10-neuralnet/10.1-learned-features.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">10.1 - Caractéristiques apprises</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../10-neuralnet/10.2-pixel-attribution.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">10.2 - Attribution de pixel</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../10-neuralnet/10.3-concepts.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">10.3 - Détecter les concepts</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../10-neuralnet/10.4-adversarial-examples.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">10.4 - Exemples adverses</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../10-neuralnet/10.5-influential-instances.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">10.5 - Instances Influentes</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../11-future/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">11 - Un regard dans une boule de cristal</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" role="navigation" aria-expanded="true" aria-label="Basculer la section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../11-future/11.1-future-ml.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">11.1 - L’avenir de l’apprentissage automatique</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../11-future/11.2-future-interpretability.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">11.2 - L’avenir de l’interprétabilité</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../12-contribute/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">12 - Contribuer à ce livre</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../13-citation/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">13 - Citer ce livre</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../14-translations/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">14 - Traductions</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../15-acknowledgements/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">15 - Remerciements</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Formulaire/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Des remarques ?</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../References/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Références</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active" data-toc-expanded="4">
    <h2 id="toc-title">Dans cette page</h2>
   
  <ul>
  <li><a href="#règles-de-portée-ancres" id="toc-règles-de-portée-ancres" class="nav-link active" data-scroll-target="#règles-de-portée-ancres">9.4 - Règles de portée (ancres)</a>
  <ul>
  <li><a href="#trouver-des-points-dancrage" id="toc-trouver-des-points-dancrage" class="nav-link" data-scroll-target="#trouver-des-points-dancrage">9.4.1 - Trouver des points d’ancrage</a></li>
  <li><a href="#complexité-et-durée-dexécution" id="toc-complexité-et-durée-dexécution" class="nav-link" data-scroll-target="#complexité-et-durée-dexécution">9.4.2 - Complexité et durée d’exécution</a></li>
  <li><a href="#exemple-de-données-tabulaires" id="toc-exemple-de-données-tabulaires" class="nav-link" data-scroll-target="#exemple-de-données-tabulaires">9.4.3 - Exemple de données tabulaires</a></li>
  <li><a href="#avantages" id="toc-avantages" class="nav-link" data-scroll-target="#avantages">9.4.4 - Avantages</a></li>
  <li><a href="#inconvénients" id="toc-inconvénients" class="nav-link" data-scroll-target="#inconvénients">9.4.5 - Inconvénients</a></li>
  <li><a href="#logiciels-et-alternatives" id="toc-logiciels-et-alternatives" class="nav-link" data-scroll-target="#logiciels-et-alternatives">9.4.6 - Logiciels et alternatives</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../09-local_model_agnostic_methods/index.html">9 - Méthodes locales indépendantes du modèle</a></li><li class="breadcrumb-item"><a href="../09-local_model_agnostic_methods/09.4-anchors.html">9.4 - Règles de portée (ancres)</a></li></ol></nav>
<div class="quarto-title">
</div>



<div class="quarto-title-meta">

    
  
    <div>
    <div class="quarto-title-meta-heading">Modifié</div>
    <div class="quarto-title-meta-contents">
      <p class="date-modified">19 février 2025</p>
    </div>
  </div>
    
  </div>
  


</header>


<div class="callout callout-style-default callout-warning callout-titled" title="Avertissement">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Avertissement
</div>
</div>
<div class="callout-body-container callout-body">
<p>En cours de traduction.</p>
</div>
</div>
<section id="règles-de-portée-ancres" class="level2">
<h2 class="anchored" data-anchor-id="règles-de-portée-ancres">9.4 - Règles de portée (ancres)</h2>
<p><em>Auteurs : Tobias Goerke et Magdalena Lang</em></p>
<p>La méthode des ancres explique les prédictions individuelles de tout modèle de classification par boîte noire en trouvant une règle de décision qui « ancre » suffisamment la prédiction. Une règle ancre une prédiction si les modifications apportées aux autres valeurs de caractéristiques n’affectent pas la prédiction. Anchors utilise des techniques d’apprentissage par renforcement en combinaison avec un algorithme de recherche de graphiques pour réduire le nombre d’appels de modèle (et donc le temps d’exécution requis) au minimum tout en étant capable de récupérer des optima locaux. Ribeiro, Singh et Guestrin ont proposé l’algorithme en 2018<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> – les mêmes chercheurs qui ont introduit l’ algorithme <a href="../09-local_model_agnostic_methods/09.2-lime.html">LIME</a>.</p>
<p>Comme son prédécesseur, l’approche des ancres déploie une stratégie <em>basée sur les perturbations pour générer des explications locales</em> pour les prédictions des modèles d’apprentissage automatique en boîte noire. Cependant, au lieu des modèles de substitution utilisés par LIME, les explications résultantes sont exprimées sous forme de règles <em>SI-ALORS</em> faciles à comprendre , appelées <em>ancres</em>. Ces règles sont réutilisables, car elles sont étendues : les ancres incluent la notion de couverture, indiquant précisément à quelles autres instances, éventuellement invisibles, elles s’appliquent. Trouver des points d’ancrage implique un problème d’exploration ou de bandit à plusieurs bras, qui trouve son origine dans la discipline de l’apprentissage par renforcement. À cette fin, des voisins, ou perturbations, sont créés et évalués pour chaque instance expliquée. Cela permet à l’approche de ne pas tenir compte de la structure de la boîte noire et de ses paramètres internes afin que ceux-ci puissent rester à la fois inobservés et inchangés. Ainsi, l’algorithme est <em>indépendant du modèle</em>, ce qui signifie qu’il peut être appliqué à <strong>n’importe quelle</strong> classe de modèle.</p>
<p>Dans leur article, les auteurs comparent leurs deux algorithmes et visualisent à quel point ils consultent différemment le voisinage d’une instance pour obtenir des résultats. Pour cela, la figure suivante représente à la fois LIME et les ancres expliquant localement un classificateur binaire complexe (prédit soit - soit + ) à l’aide de deux instances exemplaires. Les résultats de LIME n’indiquent pas leur fidélité, car LIME apprend uniquement une limite de décision linéaire qui se rapproche le mieux du modèle étant donné un espace de perturbation <span class="math inline">\(D\)</span>. Étant donné le même espace de perturbations, l’approche des ancres construit des explications dont la couverture est adaptée au comportement du modèle et l’approche exprime clairement leurs limites. Ainsi, ils sont fidèles par conception et indiquent exactement pour quelles instances ils sont valables. Cette propriété rend les ancres particulièrement intuitives et faciles à comprendre.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../images/anchors-visualization.png" class="img-fluid figure-img" data-align="center"></p>
<figcaption>LIME vs.&nbsp;Anchors – Une visualisation de jouet. Figure de Ribeiro, Singh et Guestrin (2018).</figcaption>
</figure>
</div>
<p>Comme mentionné précédemment, les résultats ou explications de l’algorithme se présentent sous la forme de règles, appelées ancres. L’exemple simple suivant illustre une telle ancre. Par exemple, supposons que nous disposions d’un modèle de boîte noire bivariée qui prédit si un passager a survécu ou non au désastre du Titanic. Nous aimerions maintenant savoir pourquoi le modèle prédit la survie d’un individu spécifique. L’algorithme d’ancrage fournit une explication des résultats comme celle présentée ci-dessous.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Attribut</th>
<th>Valeur</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Age</td>
<td>20</td>
</tr>
<tr class="even">
<td>Sexe</td>
<td>féminin</td>
</tr>
<tr class="odd">
<td>Classe</td>
<td>première</td>
</tr>
<tr class="even">
<td>Prix du Ticket</td>
<td>300$</td>
</tr>
<tr class="odd">
<td>Plus attributes</td>
<td>…</td>
</tr>
<tr class="even">
<td>Survivant</td>
<td>vrai</td>
</tr>
</tbody>
</table>
<p>Et l’explication des ancres correspondantes est :</p>
<p>SI <code>Sex = féminin</code> ET <code>Classe = première</code> PUIS PRÉVISIONS <code>Survivant = vrai</code> AVEC PRÉCISION <span class="math inline">\(97%\)</span> ET COUVERTURE <span class="math inline">\(15%\)</span>.</p>
<p>L’exemple montre comment les ancres peuvent fournir des informations essentielles sur la prédiction d’un modèle et son raisonnement sous-jacent. Le résultat montre quels attributs ont été pris en compte par le modèle, qui dans ce cas est le sexe féminin et la première classe. Les humains, étant primordiaux pour l’exactitude, peuvent utiliser cette règle pour valider le comportement du modèle. L’ancre nous indique en outre qu’elle s’applique à <span class="math inline">\(15%\)</span> des instances de l’espace de perturbation. Dans ces cas, l’explication est précise à <span class="math inline">\(97%\)</span>, ce qui signifie que les prédicats affichés sont presque exclusivement responsables du résultat prédit.</p>
<p>Une ancre <span class="math inline">\(A\)</span> est formellement défini comme suit :</p>
<p><span class="math display">\[ \mathbb{E}_{\mathcal{D}_x(z|A)}[1_{\hat{f}(x)=\hat{f}(z)}]\geq\tau,A(x)=1 \]</span></p>
<p>où: - <span class="math inline">\(x\)</span> représente l’instance expliquée (par exemple, une ligne dans un ensemble de données tabulaires). - <span class="math inline">\(A\)</span> est un ensemble de prédicats, c’est-à-dire la règle ou l’ancre résultante, telle que <span class="math inline">\(A(x)=1\)</span> lorsque tous les prédicats de fonctionnalités définis par <span class="math inline">\(A\)</span> correspondent aux valeurs des attributs de <span class="math inline">\(x\)</span>. - <span class="math inline">\(f\)</span> désigne le modèle de classification à expliquer (par exemple un modèle de réseau neuronal artificiel). Il peut être interrogé pour prédire une étiquette pour <span class="math inline">\(x\)</span> et ses perturbations. - <span class="math inline">\(D_x (\cdot|A)\)</span> indique la répartition des voisins de <span class="math inline">\(x\)</span>, correspondant à <span class="math inline">\(A\)</span>. - <span class="math inline">\(0 \leq \tau \leq 1\)</span> spécifie un seuil de précision. Seules les règles qui atteignent une fidélité locale d’au moins <span class="math inline">\(\tau\)</span> sont considérés comme un résultat valide.</p>
<p>La description formelle peut être intimidante et peut être formulée en mots :</p>
<blockquote class="blockquote">
<p>Étant donné une instance <span class="math inline">\(x\)</span> à expliquer, une règle ou une ancre <span class="math inline">\(A\)</span> doit être trouvé, tel qu’il s’applique à <span class="math inline">\(x\)</span>, alors que la même classe que pour <span class="math inline">\(x\)</span> est prédit pour une fraction d’au moins <span class="math inline">\(\tau\)</span> de les voisins étaient pareils <span class="math inline">\(A\)</span> est applicable. La précision d’une règle résulte de l’évaluation des voisins ou des perturbations (suite à <span class="math inline">\(D_x (z|A)\)</span>) à l’aide du modèle d’apprentissage automatique fourni (indiqué par la fonction d’indicateur <span class="math inline">\(1_{\hat{f}(x) = \hat{f}(z)}\)</span>).</p>
</blockquote>
<section id="trouver-des-points-dancrage" class="level3">
<h3 class="anchored" data-anchor-id="trouver-des-points-dancrage">9.4.1 - Trouver des points d’ancrage</h3>
<p>Bien que la description mathématique des ancres puisse sembler claire et simple, la construction de règles particulières est irréalisable. Il faudrait évaluer <span class="math inline">\(1_{\hat{f}(x) = \hat{f}(z)}\)</span> pour tous <span class="math inline">\(z \in \mathcal{D}_x(\cdot|A)\)</span> ce qui n’est pas possible dans des espaces d’entrée continus ou grands. Les auteurs proposent donc d’introduire le paramètre <span class="math inline">\(0 \leq \delta \leq 1\)</span> pour créer une définition probabiliste. De cette façon, les échantillons sont tirés jusqu’à ce qu’il existe une confiance statistique quant à leur précision. La définition probabiliste se lit comme suit :</p>
<p><span class="math display">\[P(prec(A)\geq\tau)\geq{}1-\delta\quad\textrm{with}\quad{}prec(A)=\mathbb{E}_{\mathcal{D}_x(z|A)}[1_{\hat{f}(x)=\hat{f}(z)}]\]</span></p>
<p>Les deux définitions précédentes sont combinées et étendues par la notion de couverture. Sa logique consiste à trouver des règles qui s’appliquent à une partie de préférence importante de l’espace d’entrée du modèle. La couverture est formellement définie comme la probabilité qu’une ancre s’applique à ses voisines, c’est-à-dire son espace de perturbation :</p>
<p><span class="math display">\[cov(A)=\mathbb{E}_{\mathcal{D}_{(z)}}[A(z)]\]</span></p>
<p>L’inclusion de cet élément conduit à la définition finale de l’ancre prenant en compte la maximisation de la couverture :</p>
<p><span class="math display">\[\underset{A\:\textrm{s.t.}\;P(prec(A)\geq\tau)\geq{}1-\delta}{\textrm{max}}cov(A)\]</span></p>
<p>Ainsi, la procédure vise à obtenir une règle qui a la couverture la plus élevée parmi toutes les règles éligibles (toutes celles qui satisfont au seuil de précision compte tenu de la définition probabiliste). Ces règles sont considérées comme plus importantes, car elles décrivent une plus grande partie du modèle. Notez que les règles avec plus de prédicats ont tendance à avoir une plus grande précision que les règles avec moins de prédicats. En particulier, une règle qui corrige chaque fonctionnalité de <span class="math inline">\(x\)</span> réduit le voisinage évalué à des instances identiques. Ainsi, le modèle classe tous les voisins de manière égale et la précision de la règle est <span class="math inline">\(1\)</span>. Dans le même temps, une règle qui corrige de nombreuses fonctionnalités est trop spécifique et ne s’applique qu’à quelques instances. Il existe donc un <em>compromis entre précision et couverture</em>.</p>
<p>L’approche des ancres utilise quatre composants principaux pour trouver des explications.</p>
<p><strong>Génération de candidats</strong> : génère de nouveaux candidats d’explication. Au premier tour, un candidat par fonctionnalité de <span class="math inline">\(x\)</span> est créé et fixe la valeur respective des perturbations possibles. Dans un tour sur deux, les meilleurs candidats du tour précédent sont étendus par un prédicat de fonctionnalité qui n’y est pas encore contenu.</p>
<p><strong>Meilleure identification du candidat</strong> : les règles des candidats doivent être comparées en fonction de la règle qui explique <span class="math inline">\(x\)</span> le meilleur. À cette fin, les perturbations correspondant à la règle actuellement observée sont créées et évaluées en appelant le modèle. Cependant, ces appels doivent être minimisés afin de limiter la surcharge de calcul. C’est pourquoi, au cœur de cette composante, il y a un bandit multi-armé d’exploration pure (<em>MAB ; KL-LUCB</em><a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>, pour être précis). Les MAB sont utilisés pour explorer et exploiter efficacement différentes stratégies (appelées armes par analogie avec les machines à sous) en utilisant la sélection séquentielle. Dans le contexte donné, chaque règle candidate doit être considérée comme un bras qui peut être tiré. Chaque fois qu’elle est tirée, les voisins respectifs sont évalués, et nous obtenons ainsi plus d’informations sur le gain de la règle candidate (précision dans le cas de l’ancre). La précision indique ainsi dans quelle mesure la règle décrit bien l’instance à expliquer.</p>
<p><strong>Validation de la précision du candidat</strong> : prend davantage d’échantillons au cas où il n’y aurait pas encore de certitude statistique que le candidat dépasse le seuil <span class="math inline">\(\tau\)</span>.</p>
<p><strong>Recherche de faisceau modifiée</strong> : tous les composants ci-dessus sont assemblés dans une recherche de faisceau, qui est un algorithme de recherche graphique et une variante de l’algorithme de largeur d’abord. Il porte les <span class="math inline">\(B\)</span> meilleurs candidats de chaque tour au suivant (où <span class="math inline">\(B\)</span> est appelée la <em>largeur du faisceau</em>). Ces <span class="math inline">\(B\)</span> meilleures règles sont ensuite utilisées pour créer de nouvelles règles. La recherche du faisceau conduit au maximum <span class="math inline">\(nombreAttributs(x)\)</span> tours, car chaque fonctionnalité ne peut être incluse dans une règle qu’une seule fois. Ainsi, à chaque tour <span class="math inline">\(i\)</span>, il génère des candidats avec exactement <span class="math inline">\(i\)</span> prédicat et sélectionne le meilleur B de celui-ci. Par conséquent, en définissant <span class="math inline">\(B\)</span> élevé, l’algorithme est plus susceptible d’éviter les optima locaux. Cela nécessite à son tour un nombre élevé d’appels de modèles et augmente ainsi la charge de calcul.</p>
<p>Ces quatre composants sont illustrés dans la figure ci-dessous.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../images/anchors-process.jpg" class="img-fluid figure-img" data-align="center"></p>
<figcaption>Les composants de l’algorithme d’ancrage et leurs interrelations (simplifié).</figcaption>
</figure>
</div>
<p>Cette approche est une recette apparemment parfaite pour dériver efficacement des informations statistiquement valables sur les raisons pour lesquelles un système a classé une instance de la manière dont il l’a fait. Il expérimente systématiquement les entrées du modèle et conclut en observant les sorties respectives. Il s’appuie sur des méthodes d’apprentissage automatique (MAB) bien établies et étudiées pour réduire le nombre d’appels effectués au modèle. Cela réduit considérablement le temps d’exécution de l’algorithme.</p>
</section>
<section id="complexité-et-durée-dexécution" class="level3">
<h3 class="anchored" data-anchor-id="complexité-et-durée-dexécution">9.4.2 - Complexité et durée d’exécution</h3>
<p>Connaître le comportement d’exécution asymptotique de l’approche des ancres permet d’évaluer ses performances attendues sur des problèmes spécifiques. Laisser <span class="math inline">\(B\)</span> désignent la largeur du faisceau et <span class="math inline">\(p\)</span> le nombre de toutes les fonctionnalités. Ensuite, l’algorithme des ancres est soumis à :</p>
<p><span class="math display">\[\mathcal{O}(B\cdot{}p^2+p^2\cdot\mathcal{O}_{\textrm{MAB}\lbrack{}B\cdot{}p,B\rbrack})\]</span></p>
<p>Cette limite fait abstraction des hyperparamètres indépendants du problème, tels que la confiance statistique <span class="math inline">\(\delta\)</span>. Ignorer les hyperparamètres permet de réduire la complexité de la limite (voir l’article original pour plus d’informations). Puisque le MAB extrait le <span class="math inline">\(B\)</span> le meilleur de <span class="math inline">\(B . p\)</span> candidats à chaque tour, la plupart des MAB et leurs durées d’exécution multiplient le <span class="math inline">\(p^2\)</span> facteur plus que tout autre paramètre.</p>
<p>Cela devient alors évident : l’efficacité de l’algorithme diminue lorsque de nombreuses fonctionnalités sont présentes.</p>
</section>
<section id="exemple-de-données-tabulaires" class="level3">
<h3 class="anchored" data-anchor-id="exemple-de-données-tabulaires">9.4.3 - Exemple de données tabulaires</h3>
<p>Les données tabulaires sont des données structurées représentées par des tableaux, dans lesquels les colonnes incarnent des fonctionnalités et des instances de lignes. Par exemple, nous utilisons les <a href="../04-datasets/04.1-datasets.html">données de location de vélos</a> pour démontrer le potentiel de l’approche des ancres à expliquer les prédictions de ML pour des instances sélectionnées. Pour cela, nous transformons la régression en problème de classification et formons une forêt aléatoire comme modèle de boîte noire. Il s’agit de déterminer si le nombre de vélos loués se situe au-dessus ou en dessous de la ligne de tendance.</p>
<p>Avant de créer des explications d’ancrage, il faut définir une fonction de perturbation. Un moyen simple d’y parvenir consiste à utiliser un espace de perturbation intuitif par défaut pour les cas d’explication tabulaires qui peuvent être construits par échantillonnage, par exemple à partir des données d’entraînement. Lors de la perturbation d’une instance, cette approche par défaut conserve les valeurs de la fonctionnalité qui sont soumises aux prédicats des ancres, tout en remplaçant les fonctionnalités non fixes par des valeurs extraites d’une autre instance échantillonnée aléatoirement avec une probabilité spécifiée. Ce processus génère de nouvelles instances similaires à celle expliquée, mais qui ont adopté certaines valeurs d’autres instances aléatoires. Ainsi, ils ressemblent aux voisins de l’instance expliquée.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../images2/9_4_3_fig_1.png" class="img-fluid figure-img" data-align="center"></p>
<figcaption>Ancres expliquant six instances de l’ensemble de données de location de vélos. Chaque ligne représente une explication ou une ancre, et chaque barre représente les prédicats de fonctionnalités qu’elle contient. L’axe des X affiche la précision d’une règle et l’épaisseur d’une barre correspond à sa couverture. La règle « de base » ne contient aucun prédicat. Ces ancres montrent que le modèle prend principalement en compte la température pour les prédictions.</figcaption>
</figure>
</div>
<p>Les résultats sont instinctivement interprétables et montrent pour chaque instance expliquée quelles caractéristiques sont les plus importantes pour la prédiction du modèle. Comme les ancres n’ont que quelques prédicats, elles ont en outre une couverture élevée et s’appliquent donc à d’autres cas. Les règles présentées ci-dessus ont été générées avec <span class="math inline">\(\tau = 0,9\)</span>. Ainsi, nous demandons des ancres dont les perturbations évaluées soutiennent fidèlement l’étiquette avec une précision d’au moins <span class="math inline">\(90%\)</span>. En outre, la discrétisation a été utilisée pour augmenter l’expressivité et l’applicabilité des caractéristiques numériques.</p>
<p>Toutes les règles précédentes ont été générées pour les cas où le modèle décide en toute confiance sur la base de quelques fonctionnalités. Cependant, d’autres instances ne sont pas classées de manière aussi distincte par le modèle, car davantage de fonctionnalités sont importantes. Dans de tels cas, les ancres deviennent plus spécifiques, comprennent plus de fonctionnalités et s’appliquent à moins d’instances.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../images2/9_4_3_fig_2.png" class="img-fluid figure-img" data-align="center"></p>
<figcaption>Expliquer les instances proches des limites de décision conduit à des règles spécifiques comprenant un nombre plus élevé de prédicats de fonctionnalités et une couverture plus faible. De plus, la règle vide, c’est-à-dire la fonctionnalité de base, devient moins importante. Cela peut être interprété comme un signal pour une limite de décision, car l’instance est située dans un quartier instable.</figcaption>
</figure>
</div>
<p>Bien que le choix de l’espace de perturbation par défaut soit un choix confortable, il peut avoir un impact important sur l’algorithme et conduire ainsi à des résultats biaisés. Par exemple, si la rame est déséquilibrée (il existe un nombre inégal d’instances de chaque classe), l’espace des perturbations l’est également. Cette condition affecte en outre la recherche de règles et la précision du résultat.</p>
<p>L’ ensemble de données <a href="../04-datasets/04.3-datasets.html">sur le cancer du col de l’utérus</a> constitue un excellent exemple de cette situation. L’application de l’algorithme d’ancrage conduit à l’une des situations suivantes :</p>
<ul>
<li>Expliquer les instances étiquetées healthy donne des règles vides car tous les voisins générés sont évalués comme <em>healthy</em>.</li>
<li>Les explications pour les instances étiquetées cancer sont trop spécifiques, c’est-à-dire comprennent de nombreux prédicats de caractéristiques, puisque l’espace de perturbation couvre principalement les valeurs des instances saines .</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../images2/9_4_3_fig_3.png" class="img-fluid figure-img" data-align="center"></p>
<figcaption>Construire des ancres dans des espaces de perturbations déséquilibrés conduit à des résultats inexpressifs.</figcaption>
</figure>
</div>
<p>Ce résultat peut être indésirable et peut être abordé de plusieurs manières. Par exemple, un espace de perturbation personnalisé peut être défini. Cette perturbation personnalisée peut être échantillonnée différemment, par exemple à partir d’un ensemble de données déséquilibré ou d’une distribution normale. Cela a cependant un effet secondaire : les voisins échantillonnés ne sont pas représentatifs et modifient la portée de la couverture. Alternativement, nous pourrions modifier la confiance du MAB <span class="math inline">\(\delta\)</span> et valeurs des paramètres d’erreur <span class="math inline">\(\epsilon\)</span>. Cela amènerait le MAB à prélever davantage d’échantillons, ce qui conduirait finalement à ce que la minorité soit échantillonnée plus souvent en termes absolus.</p>
<p>Pour cet exemple, nous utilisons un sous-ensemble de l’ensemble des cancers du col de l’utérus dans lequel la majorité des cas sont étiquetés cancer . Nous disposons alors du cadre pour créer un espace de perturbation correspondant à partir de celui-ci. Les perturbations sont désormais plus susceptibles de conduire à des prédictions variables, et l’algorithme d’ancrage peut identifier des caractéristiques importantes. Il faut cependant tenir compte de la définition de la couverture : elle n’est définie que dans l’espace des perturbations. Dans les exemples précédents, nous avons utilisé la rame comme base de l’espace de perturbation. Puisque nous n’utilisons ici qu’un sous-ensemble, une couverture élevée n’indique pas nécessairement une importance globale élevée des règles.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../images2/9_4_3_fig_4.png" class="img-fluid figure-img" data-align="center"></p>
<figcaption>Équilibrer l’ensemble de données avant de construire des ancrages montre le raisonnement du modèle pour les décisions dans les cas minoritaires.</figcaption>
</figure>
</div>
</section>
<section id="avantages" class="level3">
<h3 class="anchored" data-anchor-id="avantages">9.4.4 - Avantages</h3>
<p>L’approche des ancres offre de multiples avantages par rapport à LIME. Premièrement, le résultat de l’algorithme est plus facile à comprendre, car les règles sont <strong>faciles à interpréter</strong> (même pour les profanes).</p>
<p>De plus, <strong>les ancres sont sous-configurables</strong> et indiquent même une mesure d’importance en incluant la notion de couverture. Deuxièmement, l’approche des ancres <strong>fonctionne lorsque les prédictions du modèle sont non linéaires ou complexes</strong> dans le voisinage d’une instance. Comme l’approche déploie des techniques d’apprentissage par renforcement au lieu d’ajuster des modèles de substitution, elle est moins susceptible de sous-ajuster le modèle.</p>
<p>En dehors de cela, l’algorithme est <strong>indépendant du modèle</strong> et donc applicable à n’importe quel modèle.</p>
<p>De plus, il est <strong>très efficace car il peut être parallélisé</strong> en utilisant des MAB prenant en charge l’échantillonnage par lots (par exemple BatchSAR).</p>
</section>
<section id="inconvénients" class="level3">
<h3 class="anchored" data-anchor-id="inconvénients">9.4.5 - Inconvénients</h3>
<p>L’algorithme souffre d’une configuration <strong>hautement configurable</strong> et percutante, tout comme la plupart des explicateurs basés sur les perturbations. Non seulement les hyperparamètres tels que la largeur du faisceau ou le seuil de précision doivent être ajustés pour produire des résultats significatifs, mais la fonction de perturbation doit également être explicitement conçue pour un domaine/cas d’utilisation. Pensez à la façon dont les données tabulaires sont perturbées et réfléchissez à la manière d’appliquer les mêmes concepts aux données d’image (indice : ceux-ci ne peuvent pas être appliqués). Heureusement, des approches par défaut peuvent être utilisées dans certains domaines (par exemple tabulaires), facilitant ainsi la configuration initiale d’une explication.</p>
<p>En outre, <strong>de nombreux scénarios nécessitent une discrétisation</strong>, sinon les résultats sont trop spécifiques, ont une faible couverture et ne contribuent pas à la compréhension du modèle. Bien que la discrétisation puisse aider, elle peut également brouiller les limites de décision si elle est utilisée avec négligence et ainsi avoir l’effet exactement opposé. Puisqu’il n’existe pas de meilleure technique de discrétisation, les utilisateurs doivent connaître les données avant de décider comment discrétiser les données afin de ne pas obtenir de mauvais résultats.</p>
<p>La construction d’ancres nécessite <strong>de nombreux appels au modèle ML</strong>, comme tous les explicateurs basés sur les perturbations. Même si l’algorithme déploie des MAB pour minimiser le nombre d’appels, sa durée d’exécution dépend toujours beaucoup des performances du modèle et est donc très variable.</p>
<p>Enfin, la notion de <strong>couverture est indéfinie dans certains domaines</strong>. Par exemple, il n’existe pas de définition évidente ou universelle de la façon dont les superpixels d’une image se comparent à ceux d’autres images.</p>
</section>
<section id="logiciels-et-alternatives" class="level3">
<h3 class="anchored" data-anchor-id="logiciels-et-alternatives">9.4.6 - Logiciels et alternatives</h3>
<p>Actuellement, deux implémentations sont disponibles : <a href="https://github.com/marcotcr/anchor">Anchor, un module Python</a> (également intégré par <a href="https://github.com/SeldonIO/alibi">Alibi</a>) et une <a href="https://github.com/viadee/javaAnchorExplainer">implémentation Java</a>. Le premier est la référence des auteurs de l’algorithme d’ancrage et le second est une implémentation haute performance livrée avec une interface R, appelée <a href="https://github.com/viadee/anchorsOnR">anchors</a>, qui a été utilisée pour les exemples de ce chapitre. À l’heure actuelle, l’implémentation des ancres ne prend en charge que les données tabulaires. Cependant, des ancres peuvent théoriquement être construites pour n’importe quel domaine ou type de données.</p>
<!-- REFERENCES -->
<!-- 02 -->
<!-- 02.3 -->
<!-- 03 -->
<!-- 03.1 -->
<!--
[^Miller2017]: Miller, Tim. "Explanation in artificial intelligence: Insights from the social sciences." arXiv Preprint arXiv:1706.07269. (2017).
-->
<!-- 03.3 -->
<!-- 03.4 -->
<!--
[^Doshi2017]: Doshi-Velez, Finale, and Been Kim. "Towards a rigorous science of interpretable machine learning," no. Ml: 1–13. https://arxiv.org/abs/1702.08608 (2017).
-->
<!-- 03.5 -->
<!-- 03.6 -->
<!--
[^Miller2017]: Miller, Tim. "Explanation in artificial intelligence: Insights from the social sciences." arXiv Preprint arXiv:1706.07269. (2017).
-->
<!-- 04.1 -->
<!-- 04.2 -->
<!-- 04.3 -->
<!-- 05.1 -->
<!-- 05.4 -->
<!--
[^Hastie]: Friedman, Jerome, Trevor Hastie, and Robert Tibshirani. "The elements of statistical learning". hastie.su.domains/ElemStatLearn (2009).
-->
<!-- 05.5 -->
<!-- 05.6 -->
<!-- 06.0 -->
<!--
[^Ribeiro2016]: Ribeiro, Marco Tulio, Sameer Singh, and Carlos Guestrin. "Model-agnostic interpretability of machine learning." ICML Workshop on Human Interpretability in Machine Learning. (2016).
-->
<!-- 07.0 -->
<!-- 08.1 -->
<!-- 08.2 -->
<!-- 08.3 -->
<!--
[^Friedman2008]: Friedman, Jerome H, and Bogdan E Popescu. "Predictive learning via rule ensembles." The Annals of Applied Statistics. JSTOR, 916–54. (2008).
-->
<!--
[^pdp-importance]: Greenwell, Brandon M., Bradley C. Boehmke, and Andrew J. McCarthy. "A simple and effective model-based variable importance measure." arXiv preprint arXiv:1805.04755 (2018).
-->
<!-- 08.4 -->
<!--
[^fanova]: Hooker, Giles. "Discovering additive structure in black box functions." Proceedings of the tenth ACM SIGKDD international conference on Knowledge discovery and data mining. (2004).
-->
<!--
[^ale]: Apley, Daniel W., and Jingyu Zhu. "Visualizing the effects of predictor variables in black box supervised learning models." Journal of the Royal Statistical Society: Series B (Statistical Methodology) 82.4 (2020): 1059-1086.
-->
<!-- 08.5 -->
<!-- 08.7 -->
<!--
[^critique]: Kim, Been, Rajiv Khanna, and Oluwasanmi O. Koyejo. "Examples are not enough, learn to criticize! Criticism for interpretability." Advances in Neural Information Processing Systems (2016).
-->
<!-- 09.1 -->
<!-- 09.2 -->
<!-- 09.3 -->
<!-- 09.4 -->
<!-- 09.5 -->
<!-- 09.6 -->
<!--
[^lundberg2017]: Lundberg, Scott M., and Su-In Lee. "A unified approach to interpreting model predictions." Advances in Neural Information Processing Systems (2017).
-->
<!--
[^cond1]: Sundararajan, Mukund, and Amir Najmi. "The many Shapley values for model explanation." arXiv preprint arXiv:1908.08474 (2019).
-->
<!--
[^cond2]: Janzing, Dominik, Lenon Minorics, and Patrick Blöbaum. "Feature relevance quantification in explainable AI: A causal problem." International Conference on Artificial Intelligence and Statistics. PMLR (2020).
-->
<!--
[^fool]: Slack, Dylan, Sophie Hilgard, Emily Jia, Sameer Singh, and Himabindu Lakkaraju. "Fooling lime and shap: Adversarial attacks on post hoc explanation methods." In Proceedings of the AAAI/ACM Conference on AI, Ethics, and Society, pp. 180-186 (2020).
-->
<!-- 10.0 -->
<!-- 10.1 -->
<!-- 10.2 -->
<!--
[^integrated-gradients]: Sundararajan, Mukund, Ankur Taly, and Qiqi Yan. "Axiomatic attribution for deep networks." Proceedings of the 34th International Conference on Machine Learning-Volume 70. JMLR. org, 2017.
-->
<!--
[^grad-cam]: Selvaraju, Ramprasaath R., et al. "Grad-cam: Visual explanations from deep networks via gradient-based localization." Proceedings of the IEEE international conference on computer vision. (2017).
-->
<!--
[^guided-backpropagation]: Springenberg, Jost Tobias, et al. "Striving for simplicity: The all convolutional net." arXiv preprint arXiv:1412.6806 (2014).
-->
<!--
[^lrp]: Bach, Sebastian, et al. "On pixel-wise explanations for non-linear classifier decisions by layer-wise relevance propagation." PloS one 10.7 (2015).
-->
<!-- References about problems -->
<!--
[^better-understanding]: Ancona, Marco, et al. "Towards better understanding of gradient-based attribution methods for deep neural networks." arXiv preprint arXiv:1711.06104 (2017).
-->
<!--
[^perplexing-behavior]: Nie, Weili, Yang Zhang, and Ankit Patel. "A theoretical explanation for perplexing behaviors of backpropagation-based visualizations." arXiv preprint arXiv:1805.07039 (2018).
-->
<!-- Toolboxes -->
<!--
[^innvestigate]: Alber, Maximilian, Sebastian Lapuschkin, Philipp Seegerer, Miriam Hägele, Kristof T. Schütt, Grégoire Montavon, Wojciech Samek, Klaus-Robert Müller, Sven Dähne, and Pieter-Jan Kindermans. "iNNvestigate neural networks!." J. Mach. Learn. Res. 20, no. 93 (2019): 1-8.
-->
<!--
[^human-visuals]: Linsley, Drew, et al. "What are the visual features underlying human versus machine vision?." Proceedings of the IEEE International Conference on Computer Vision Workshops. 2017.
-->
<!-- 10.3 -->
<!-- 10.4 -->
<!-- 10.5 -->


</section>
</section>


<a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Retour au sommet</a><div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Notes de bas de page</h2>

<ol>
<li id="fn1"><p>Marco Tulio Ribeiro, Sameer Singh and Carlos Guestrin. “Anchors: high-precision model-agnostic explanations”. AAAI Conference on Artificial Intelligence (AAAI), 2018<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>Emilie Kaufmann and Shivaram Kalyanakrishnan. “Information complexity in bandit subset selection”. Proceedings of Machine Learning Research (2013).<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copié");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copié");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
          // target, if specified
          link.setAttribute("target", "_blank");
          if (link.getAttribute("rel") === null) {
            link.setAttribute("rel", "noopener");
          }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../09-local_model_agnostic_methods/09.3-counterfactual.html" class="pagination-link" aria-label="9.3 - Explications contrefactuelles">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">9.3 - Explications contrefactuelles</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../09-local_model_agnostic_methods/09.5-shapley.html" class="pagination-link" aria-label="9.5 - Valeurs de Shapley">
        <span class="nav-page-text">9.5 - Valeurs de Shapley</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
<p>Copyright 2018-2025, Christoph Molnar <br> Traduction 2024-2025 : Nicolas Guillard</p>
</div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>